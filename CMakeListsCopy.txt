cmake_minimum_required(VERSION 3.20)
project(raytracer)

set(CMAKE_CXX_STANDARD 20)

set(SDL2_DIR <path_to_SDL2>)
set(SDL2_LIB_DIR ${SDL2_DIR}/lib)

file(GLOB raytracer_SRC
        ${PROJECT_SOURCE_DIR}/source/*.cc
        ${PROJECT_SOURCE_DIR}/source/*.h
        ${PROJECT_SOURCE_DIR}/source/scene/*.cc
        ${PROJECT_SOURCE_DIR}/source/scene/*.h
        ${PROJECT_SOURCE_DIR}/source/geometry/*.cc
        ${PROJECT_SOURCE_DIR}/source/geometry/*.h
        ${PROJECT_SOURCE_DIR}/source/constants/*.h
        ${PROJECT_SOURCE_DIR}/source/color/*.h
        ${PROJECT_SOURCE_DIR}/source/color/*.cc
        ${PROJECT_SOURCE_DIR}/source/renderer/*.h
        ${PROJECT_SOURCE_DIR}/source/math/*.h
        ${PROJECT_SOURCE_DIR}/source/math/*.cc
        ${PROJECT_SOURCE_DIR}/source/textures/bmp/*.h
        ${PROJECT_SOURCE_DIR}/source/textures/bmp/*.cc
        )

include_directories(${SDL2_DIR}/include)

add_executable(raytracer ${raytracer_SRC})

add_custom_command(TARGET raytracer POST_BUILD
        COMMAND ${CMAKE_COMMAND} -E copy_if_different
        "<path_to_SDL2.dll>"
        $<TARGET_FILE_DIR:raytracer>)

target_include_directories(raytracer PRIVATE <path_to_glm>)
target_link_libraries(raytracer PRIVATE ${SDL2_LIB_DIR}/libSDL2.dll.a ${SDL2_LIB_DIR}/libSDL2main.a)
target_compile_options(raytracer PUBLIC -Wall -Wextra -Wpedantic -O3)
